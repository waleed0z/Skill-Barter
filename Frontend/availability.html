<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillBarter - Availability</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <nav class="nav">
            <div class="nav-brand">
                <h1>SkillBarter</h1>
            </div>
            <ul class="nav-links">
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="skills.html">Skills</a></li>
                <li><a href="availability.html" class="active">Availability</a></li>
                <li><a href="matching.html">Matching</a></li>
                <li><a href="session.html">Sessions</a></li>
                <li><a href="ratings.html">Ratings</a></li>
                <li><a href="#" id="logout">Logout</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <div class="availability-container">
                <h1>Set Your Availability</h1>

                <div class="calendar-container">
                    <div class="calendar-header">
                        <button id="prev-week" class="btn btn-secondary">&larr; Previous Week</button>
                        <h2 id="current-week">Week of January 15, 2026</h2>
                        <button id="next-week" class="btn btn-secondary">Next Week &rarr;</button>
                    </div>

                    <div class="calendar-grid">
                        <div class="time-column">
                            <div class="time-header">Time</div>
                            <div class="time-slot">9:00 AM</div>
                            <div class="time-slot">10:00 AM</div>
                            <div class="time-slot">11:00 AM</div>
                            <div class="time-slot">12:00 PM</div>
                            <div class="time-slot">1:00 PM</div>
                            <div class="time-slot">2:00 PM</div>
                            <div class="time-slot">3:00 PM</div>
                            <div class="time-slot">4:00 PM</div>
                            <div class="time-slot">5:00 PM</div>
                            <div class="time-slot">6:00 PM</div>
                            <div class="time-slot">7:00 PM</div>
                            <div class="time-slot">8:00 PM</div>
                        </div>

                        <div class="days-container">
                            <div class="day-column">
                                <div class="day-header">Mon</div>
                                <div class="day-slots" id="mon-slots">
                                    <!-- Monday slots will be populated by JS -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Tue</div>
                                <div class="day-slots" id="tue-slots">
                                    <!-- Tuesday slots will be populated by JS -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Wed</div>
                                <div class="day-slots" id="wed-slots">
                                    <!-- Wednesday slots will be populated by JS -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Thu</div>
                                <div class="day-slots" id="thu-slots">
                                    <!-- Thursday slots will be populated by JS -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Fri</div>
                                <div class="day-slots" id="fri-slots">
                                    <!-- Friday slots will be populated by JS -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Sat</div>
                                <div class="day-slots" id="sat-slots">
                                    <!-- Saturday slots will be populated by JS -->
                                </div>
                            </div>
                            <div class="day-column">
                                <div class="day-header">Sun</div>
                                <div class="day-slots" id="sun-slots">
                                    <!-- Sunday slots will be populated by JS -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="availability-actions">
                    <button class="btn btn-primary" onclick="saveAvailability()">Save Availability</button>
                    <button class="btn btn-secondary" onclick="clearAvailability()">Clear All</button>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
    <script src="data.js"></script>
    <script>
        // Availability page specific JS
        let currentWeekStart = new Date(2026, 0, 15); // January 15, 2026
        let selectedSlots = new Set(mockUser.availability);

        document.addEventListener('DOMContentLoaded', function() {
            renderCalendar();
            updateWeekDisplay();

            document.getElementById('prev-week').addEventListener('click', function() {
                currentWeekStart.setDate(currentWeekStart.getDate() - 7);
                updateWeekDisplay();
                renderCalendar();
            });

            document.getElementById('next-week').addEventListener('click', function() {
                currentWeekStart.setDate(currentWeekStart.getDate() + 7);
                updateWeekDisplay();
                renderCalendar();
            });
        });

        function updateWeekDisplay() {
            const weekEnd = new Date(currentWeekStart);
            weekEnd.setDate(weekEnd.getDate() + 6);
            document.getElementById('current-week').textContent = 
                `Week of ${currentWeekStart.toLocaleDateString()} - ${weekEnd.toLocaleDateString()}`;
        }

        function renderCalendar() {
            const days = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];
            const timeSlots = [
                '9:00 AM', '10:00 AM', '11:00 AM', '12:00 PM', '1:00 PM', '2:00 PM',
                '3:00 PM', '4:00 PM', '5:00 PM', '6:00 PM', '7:00 PM', '8:00 PM'
            ];

            days.forEach(day => {
                const container = document.getElementById(`${day}-slots`);
                container.innerHTML = '';

                timeSlots.forEach(time => {
                    const slotDate = new Date(currentWeekStart);
                    const dayIndex = days.indexOf(day);
                    slotDate.setDate(slotDate.getDate() + dayIndex);
                    const slotId = `${slotDate.toISOString().split('T')[0]}-${time}`;

                    const slotEl = document.createElement('div');
                    slotEl.className = `time-slot ${selectedSlots.has(slotId) ? 'selected' : ''}`;
                    slotEl.textContent = time;
                    slotEl.addEventListener('click', () => toggleSlot(slotId, slotEl));
                    container.appendChild(slotEl);
                });
            });
        }

        function toggleSlot(slotId, element) {
            if (selectedSlots.has(slotId)) {
                selectedSlots.delete(slotId);
                element.classList.remove('selected');
            } else {
                selectedSlots.add(slotId);
                element.classList.add('selected');
            }
        }

        function saveAvailability() {
            mockUser.availability = Array.from(selectedSlots);
            alert('Availability saved successfully!');
        }

        function clearAvailability() {
            selectedSlots.clear();
            renderCalendar();
        }
    </script>
</body>
</html>
