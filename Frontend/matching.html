<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillBarter - Matching</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <nav class="nav">
            <div class="nav-brand">
                <h1>SkillBarter</h1>
            </div>
            <ul class="nav-links">
                <li><a href="dashboard.html">Dashboard</a></li>
                <li><a href="skills.html">Skills</a></li>
                <li><a href="availability.html">Availability</a></li>
                <li><a href="matching.html" class="active">Matching</a></li>
                <li><a href="session.html">Sessions</a></li>
                <li><a href="ratings.html">Ratings</a></li>
                <li><a href="#" id="logout">Logout</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <div class="matching-container">
                <h1>Find Skill Exchange Matches</h1>

                <div class="matching-results">
                    <h2>Available Matches</h2>
                    <div id="matches-list">
                        <!-- Matches will be populated by JS -->
                    </div>
                </div>

                <div class="chain-examples">
                    <h2>How Exchange Chains Work</h2>
                    <div class="chain-diagram">
                        <div class="chain-step">
                            <div class="user-node">You</div>
                            <div class="arrow">→</div>
                            <div class="user-node">Bob</div>
                            <div class="arrow">→</div>
                            <div class="user-node">Carol</div>
                            <div class="arrow">→</div>
                            <div class="user-node">You</div>
                        </div>
                        <p class="chain-description">
                            In this 3-way chain: You teach Bob, Bob teaches Carol, Carol teaches You.
                            Everyone teaches once and learns once, earning and spending 1 credit each.
                        </p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
    <script src="data.js"></script>
    <script>
        // Matching page specific JS
        document.addEventListener('DOMContentLoaded', function() {
            loadMatches();
        });

        function loadMatches() {
            const matchesContainer = document.getElementById('matches-list');
            matchesContainer.innerHTML = '';

            mockMatches.forEach(match => {
                const matchEl = document.createElement('div');
                matchEl.className = 'match-card';

                if (match.type === 'direct') {
                    matchEl.innerHTML = `
                        <div class="match-header">
                            <h3>Direct Match</h3>
                            <div class="match-type direct">Direct Exchange</div>
                        </div>
                        <div class="match-details">
                            <p><strong>You teach:</strong> ${match.youTeach}</p>
                            <p><strong>You learn:</strong> ${match.youLearn}</p>
                            <p><strong>With:</strong> ${match.partner}</p>
                            <p><strong>Available times:</strong> ${match.times.join(', ')}</p>
                        </div>
                        <div class="match-actions">
                            <button class="btn btn-primary" onclick="scheduleMatch('${match.id}')">Schedule Session</button>
                        </div>
                    `;
                } else if (match.type === 'chain') {
                    matchEl.innerHTML = `
                        <div class="match-header">
                            <h3>Exchange Chain</h3>
                            <div class="match-type chain">3-Way Chain</div>
                        </div>
                        <div class="chain-visualization">
                            <div class="chain-participants">
                                <span class="participant you">You</span>
                                <span class="arrow">→</span>
                                <span class="participant">${match.chain[0]}</span>
                                <span class="arrow">→</span>
                                <span class="participant">${match.chain[1]}</span>
                                <span class="arrow">→</span>
                                <span class="participant you">You</span>
                            </div>
                            <div class="chain-details">
                                <p><strong>You teach:</strong> ${match.youTeach}</p>
                                <p><strong>You learn:</strong> ${match.youLearn}</p>
                                <p><strong>Chain partners:</strong> ${match.chain.join(' → ')}</p>
                            </div>
                        </div>
                        <div class="match-actions">
                            <button class="btn btn-primary" onclick="scheduleChain('${match.id}')">Join Chain</button>
                        </div>
                    `;
                }

                matchesContainer.appendChild(matchEl);
            });
        }

        function scheduleMatch(matchId) {
            alert(`Scheduling direct match ${matchId}. In production, this would navigate to session booking.`);
            window.location.href = 'session.html';
        }

        function scheduleChain(chainId) {
            alert(`Joining chain ${chainId}. In production, this would navigate to chain confirmation.`);
            window.location.href = 'session.html';
        }
    </script>
</body>
</html>
